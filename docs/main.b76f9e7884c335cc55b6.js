!function(e){function n(n){for(var r,s,i=n[0],u=n[1],c=n[2],d=0,m=[];d<i.length;d++)s=i[d],Object.prototype.hasOwnProperty.call(o,s)&&o[s]&&m.push(o[s][0]),o[s]=0;for(r in u)Object.prototype.hasOwnProperty.call(u,r)&&(e[r]=u[r]);for(l&&l(n);m.length;)m.shift()();return a.push.apply(a,c||[]),t()}function t(){for(var e,n=0;n<a.length;n++){for(var t=a[n],r=!0,i=1;i<t.length;i++){var u=t[i];0!==o[u]&&(r=!1)}r&&(a.splice(n--,1),e=s(s.s=t[0]))}return e}var r={},o={0:0},a=[];function s(n){if(r[n])return r[n].exports;var t=r[n]={i:n,l:!1,exports:{}};return e[n].call(t.exports,t,t.exports,s),t.l=!0,t.exports}s.m=e,s.c=r,s.d=function(e,n,t){s.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:t})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,n){if(1&n&&(e=s(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var t=Object.create(null);if(s.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var r in e)s.d(t,r,function(n){return e[n]}.bind(null,r));return t},s.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(n,"a",n),n},s.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},s.p="";var i=window.webpackJsonp=window.webpackJsonp||[],u=i.push.bind(i);i.push=n,i=i.slice();for(var c=0;c<i.length;c++)n(i[c]);var l=u;a.push(["tjUo",1]),t()}({"Wb3+":function(e,n,t){"use strict";t.r(n),n.default=t.p+"8a38237adaa8dcf738832da460e9a972.svg"},kMZY:function(e,n,t){var r=t("LboF"),o=t("rXkF");"string"==typeof(o=o.__esModule?o.default:o)&&(o=[[e.i,o,""]]);var a={insert:"head",singleton:!1};r(o,a);e.exports=o.locals||{}},rXkF:function(e,n,t){var r=t("JPst"),o=t("HeW1"),a=t("Wb3+");n=r(!1);var s=o(a);n.push([e.i,".clock {\n    border-radius: 50%;\n    background: #fff url("+s+") no-repeat center;\n    background-size: 88%;\n    position: relative;\n    width: 300px;\n    height: 300px;\n    margin: auto;\n}\n\n@media (max-width: 750px) {\n    input {\n        width: 22%;\n    }\n}\n\n#hours-hand {\n    background: #000;\n    height: 20%;\n    left: 48.75%;\n    position: absolute;\n    top: 30%;\n    transform-origin: 50% 100%;\n    width: 2.5%;\n}\n\n#minutes-hand {\n    background: #000;\n    height: 40%;\n    left: 49%;\n    position: absolute;\n    top: 10%;\n    transform-origin: 50% 100%;\n    width: 2%;\n}\n\n#seconds-hand {\n    background: #000;\n    height: 45%;\n    left: 49.5%;\n    position: absolute;\n    top: 14%;\n    transform-origin: 50% 80%;\n    width: 1%;\n    z-index: 8;\n}\n\n\n",""]),e.exports=n},tjUo:function(e,n,t){"use strict";t.r(n);var r=t("q1tI"),o=t.n(r),a=t("i8i4"),s=function(e){return Math.floor(Math.random()*e)+1},i=s(12),u=s(59),c=s(59),l=function(){return{hours:i,minutes:u,seconds:c}};console.log({time:l()});t("kMZY");var d,m,f=function(e){return document.querySelector(e)&&document.querySelector(e).getAttribute("data-rotation")},h=function(e){return"rotateZ(".concat(e,"deg)")},p=function(e,n){var t=document.getElementById(e);t&&(t.style.transform=h(n))},g=function(e){var n=e.hours,t=e.minutes,r=e.seconds,a=e.includeSeconds,s=e.showRow,i=function(e){var n=e.hours,t=e.minutes;return{hours:30*n+t/2,minutes:6*t,seconds:6*e.seconds}}({hours:n,minutes:t,seconds:r});return o.a.useLayoutEffect((function(){var e=f("#hours"),o=f("#minutes"),a=f("#seconds");console.log("checking if should force render to update dom on hydration"),e!==i.hours&&o!==i.minutes&&a!==i.seconds&&(console.log({hours:n,minutes:t,seconds:r,hands:i},"forcing render"),p("hours-hand",i.hours),p("minutes-hand",i.minutes),p("seconds-hand",i.seconds))}),[]),o.a.createElement("div",{id:"question-row",className:"row",style:{display:s}},o.a.createElement("div",{className:"clock"},o.a.createElement("div",{className:"hours-container"},o.a.createElement("div",{id:"hours-hand","data-rotation":i.hours,style:{transform:h(i.hours)}})),o.a.createElement("div",{className:"minutes-container"},o.a.createElement("div",{id:"minutes-hand","data-rotation":i.minutes,style:{transform:h(i.minutes)}})),a&&o.a.createElement("div",{className:"seconds-container"},o.a.createElement("div",{id:"seconds-hand","data-rotation":i.seconds,style:{transform:h(i.seconds)}}))))},y=function(e){return parseInt(document.querySelector(e).value,10)},v=function(e){var n=e.answer,t=e.answerIsCorrect,r=e.includeSeconds,a=e.handleChange,s=e.showRow;o.a.useLayoutEffect((function(){document.querySelector("#answer-row input#hours").focus()}),[]);var i=function(e){a({hours:y("#hours"),minutes:y("#minutes"),seconds:r&&y("#seconds")})};return o.a.createElement("div",{id:"answer-row",className:"row",style:{display:s}},"The time is: ",o.a.createElement("br",null),o.a.createElement("input",{type:"number",max:"12",min:"0",step:"1",id:"hours",value:n.hours,onChange:i})," : ",o.a.createElement("input",{type:"number",max:"59",min:"0",step:"1",id:"minutes",value:n.minutes,onChange:i}),r&&o.a.createElement("span",null," : "),r&&o.a.createElement("input",{type:"number",max:"59",min:"0",step:"1",id:"seconds",value:n.seconds,onChange:i}),o.a.createElement("div",{className:"mark-holder"},o.a.createElement("span",{className:"cross",style:{display:null==t||t?"none":""}},"✘")))},b="https://api.thecatapi.com/api/images/get?format=src&type=gif",w=function(){m=new Promise((function(e,n){b+="&cacheBuster="+(new Date).getTime();var t=document.createElement("img");t.onload=function(){console.log(b,"preloaded!"),d=t,e()},t.onerror=function(e){n(e)},t.src=b}))},E=function(e){var n=e.question;return o.a.useLayoutEffect((function(){var e;e=document.getElementById("cat-gif"),m||w(),m.then((function(){e.innerHTML="",e.appendChild(d)})).then((function(){m=null,w()}))}),[n]),o.a.createElement("div",{id:"cat-gif",className:"done-row"},"Loading...")},S=function(e){var n=e.question,t=e.includeSeconds,r=e.shouldDisplay,a=e.resetPage,s="".concat(n.hours.toString().padStart(2,"0"),":").concat(n.minutes.toString().padStart(2,"0"));return t&&(s+=":".concat(n.seconds.toString().padStart(2,"0"))),o.a.createElement("div",{id:"done",className:"row",style:{display:r}},o.a.createElement("div",{className:"result done-row"},"Yes! The time was ",s),o.a.createElement("div",{className:"done-row"},o.a.createElement("button",{onClick:a},"Awesome, Again?")),o.a.createElement(E,{question:n}))};function k(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var t=[],r=!0,o=!1,a=void 0;try{for(var s,i=e[Symbol.iterator]();!(r=(s=i.next()).done)&&(t.push(s.value),!n||t.length!==n);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==i.return||i.return()}finally{if(o)throw a}}return t}(e,n)||function(e,n){if(!e)return;if("string"==typeof e)return x(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return x(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function x(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}var j=function(){var e=k(o.a.useState({hours:"",minutes:"",seconds:""}),2),n=e[0],t=e[1],r=k(o.a.useState(null),2),a=r[0],d=r[1],m=k(o.a.useState(l()),2),f=m[0],h=m[1],p=k(o.a.useState(!1),2),y=p[0],b=p[1],w=function(){return null!=a&&a?"none":""};return o.a.createElement("div",null,o.a.createElement(g,{hours:f.hours,minutes:f.minutes,seconds:f.seconds,includeSeconds:y,showRow:w()}),o.a.createElement(v,{answer:n,answerIsCorrect:a,includeSeconds:y,showRow:w(),handleChange:function(e){console.log({handling:e}),t(e),d(function(e,n){var t=!n||e.seconds===c,r=e.hours===i&&e.minutes===u&&t;return console.log({checking:e,correct:l(),includeSeconds:n,allMatch:r}),r}(e,y))}}),o.a.createElement(S,{question:f,includeSeconds:y,shouldDisplay:null!=a&&a?"":"none",resetPage:function(){var e=(i=s(12),u=s(59),c=s(59),l());h(e),t({hours:"",minutes:"",seconds:""}),d(null)}}),o.a.createElement("div",{id:"difficulty",className:"row"},o.a.createElement("label",{htmlFor:"include-seconds"},"Include seconds in the question?",o.a.createElement("input",{type:"checkbox",name:"include-seconds",checked:y,onChange:function(e){b(e.target.checked)}}))))};Object(a.hydrate)(o.a.createElement(j,null),document.getElementById("root"))}});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL3N0YXRpb25fY2xvY2suc3ZnIiwid2VicGFjazovLy8uL3NyYy9jbG9jay5jc3M/MzAyNiIsIndlYnBhY2s6Ly8vLi9zcmMvY2xvY2suY3NzIiwid2VicGFjazovLy8uL3NyYy9xdWVzdGlvbi5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvUXVlc3Rpb25Sb3cuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NhdC1naWZzLmpzIiwid2VicGFjazovLy8uL3NyYy9mcm9tVGltZS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvRW50ZXJBbnN3ZXJSb3cuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL1JhbmRvbUNhdEdpZi5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvQ29ycmVjdEFuc3dlclJvdy5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvQ2xvY2t5TWNGYWNlLmpzIiwid2VicGFjazovLy8uL3NyYy9pbmRleC5qcyJdLCJuYW1lcyI6WyJ3ZWJwYWNrSnNvbnBDYWxsYmFjayIsImRhdGEiLCJtb2R1bGVJZCIsImNodW5rSWQiLCJjaHVua0lkcyIsIm1vcmVNb2R1bGVzIiwiZXhlY3V0ZU1vZHVsZXMiLCJpIiwicmVzb2x2ZXMiLCJsZW5ndGgiLCJPYmplY3QiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsImNhbGwiLCJpbnN0YWxsZWRDaHVua3MiLCJwdXNoIiwibW9kdWxlcyIsInBhcmVudEpzb25wRnVuY3Rpb24iLCJzaGlmdCIsImRlZmVycmVkTW9kdWxlcyIsImFwcGx5IiwiY2hlY2tEZWZlcnJlZE1vZHVsZXMiLCJyZXN1bHQiLCJkZWZlcnJlZE1vZHVsZSIsImZ1bGZpbGxlZCIsImoiLCJkZXBJZCIsInNwbGljZSIsIl9fd2VicGFja19yZXF1aXJlX18iLCJzIiwiaW5zdGFsbGVkTW9kdWxlcyIsIjAiLCJleHBvcnRzIiwibW9kdWxlIiwibCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiciIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwidmFsdWUiLCJ0IiwibW9kZSIsIl9fZXNNb2R1bGUiLCJucyIsImNyZWF0ZSIsImtleSIsImJpbmQiLCJuIiwib2JqZWN0IiwicHJvcGVydHkiLCJwIiwianNvbnBBcnJheSIsIndpbmRvdyIsIm9sZEpzb25wRnVuY3Rpb24iLCJzbGljZSIsImFwaSIsImNvbnRlbnQiLCJkZWZhdWx0Iiwib3B0aW9ucyIsImxvY2FscyIsIl9fX0NTU19MT0FERVJfQVBJX0lNUE9SVF9fXyIsIl9fX0NTU19MT0FERVJfR0VUX1VSTF9JTVBPUlRfX18iLCJfX19DU1NfTE9BREVSX1VSTF9JTVBPUlRfMF9fXyIsIl9fX0NTU19MT0FERVJfVVJMX1JFUExBQ0VNRU5UXzBfX18iLCJuZXh0UmFuZG9tIiwibWF4IiwiTWF0aCIsImZsb29yIiwicmFuZG9tIiwiaG91cnMiLCJtaW51dGVzIiwic2Vjb25kcyIsInJlYWQiLCJjb25zb2xlIiwibG9nIiwidGltZSIsIm5leHRJbWFnZSIsInByZWxvYWQiLCJnZXRSb3RhdGlvbiIsInNlbGVjdG9yIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiZ2V0QXR0cmlidXRlIiwiY3NzUm90YXRpb24iLCJzZXRSb3RhdGlvbiIsImVsZW1lbnRJZCIsInJvdGF0aW9uIiwiZWxlbWVudCIsImdldEVsZW1lbnRCeUlkIiwic3R5bGUiLCJ0cmFuc2Zvcm0iLCJRdWVzdGlvblJvdyIsImluY2x1ZGVTZWNvbmRzIiwic2hvd1JvdyIsImhhbmRzIiwidG9IYW5kUG9zaXRpb24iLCJSZWFjdCIsInVzZUxheW91dEVmZmVjdCIsImhvdXJzUm90YXRpb24iLCJtaW51dGVzUm90YXRpb24iLCJzZWNvbmRzUm90YXRpb24iLCJpZCIsImNsYXNzTmFtZSIsImRpc3BsYXkiLCJkYXRhLXJvdGF0aW9uIiwibnVtYmVyRnJvbUlucHV0IiwicGFyc2VJbnQiLCJBbnN3ZXJJbnB1dCIsImFuc3dlciIsImFuc3dlcklzQ29ycmVjdCIsImhhbmRsZUNoYW5nZSIsImZvY3VzIiwib25DaGFuZ2UiLCJlIiwidHlwZSIsIm1pbiIsInN0ZXAiLCJjYXRHaWZVcmwiLCJwcmVsb2FkTmV4dENhdEdpZiIsIlByb21pc2UiLCJyZXNvbHZlIiwicmVqZWN0IiwiRGF0ZSIsImdldFRpbWUiLCJpbWFnZSIsImNyZWF0ZUVsZW1lbnQiLCJvbmxvYWQiLCJvbmVycm9yIiwic3JjIiwiUmFuZG9tQ2F0R2lmIiwicXVlc3Rpb24iLCJqc0VsZW1lbnQiLCJ0aGVuIiwiaW5uZXJIVE1MIiwiYXBwZW5kQ2hpbGQiLCJDb3JyZWN0QW5zd2VyIiwic2hvdWxkRGlzcGxheSIsInJlc2V0UGFnZSIsImZvcm1hdHRlZEFuc3dlciIsInRvU3RyaW5nIiwicGFkU3RhcnQiLCJvbkNsaWNrIiwiQ2xvY2t5TWNGYWNlIiwidXNlU3RhdGUiLCJzZXRBbnN3ZXIiLCJzZXRBbnN3ZXJJc0NvcnJlY3QiLCJxIiwic2V0UXVlc3Rpb24iLCJzZXRJbmNsdWRlUXVlc3Rpb25zIiwiaGlkZVdoZW5Db3JyZWN0IiwiaGFuZGxpbmciLCJhIiwic2tpcE9yQ2hlY2tTZWNvbmRzIiwiYWxsTWF0Y2giLCJjaGVja2luZyIsImNvcnJlY3QiLCJuZXdRdWVzdGlvbiIsImh0bWxGb3IiLCJjaGVja2VkIiwidGFyZ2V0IiwiaHlkcmF0ZSJdLCJtYXBwaW5ncyI6ImFBQ0UsU0FBU0EsRUFBcUJDLEdBUTdCLElBUEEsSUFNSUMsRUFBVUMsRUFOVkMsRUFBV0gsRUFBSyxHQUNoQkksRUFBY0osRUFBSyxHQUNuQkssRUFBaUJMLEVBQUssR0FJSE0sRUFBSSxFQUFHQyxFQUFXLEdBQ3BDRCxFQUFJSCxFQUFTSyxPQUFRRixJQUN6QkosRUFBVUMsRUFBU0csR0FDaEJHLE9BQU9DLFVBQVVDLGVBQWVDLEtBQUtDLEVBQWlCWCxJQUFZVyxFQUFnQlgsSUFDcEZLLEVBQVNPLEtBQUtELEVBQWdCWCxHQUFTLElBRXhDVyxFQUFnQlgsR0FBVyxFQUU1QixJQUFJ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RCxlQUFnQkEsRUFDaEI0QyxjQW5DZSxNQUFuQjNCLEdBQTRCQSxFQUEyQixHQUFULE9Bb0MxQzRCLFVBL0JZLFdBQ2hCLElBQU1tQixHUHRCUnZGLEVBQVFMLEVBQVcsSUFDbkJNLEVBQVVOLEVBQVcsSUFDckJPLEVBQVVQLEVBQVcsSUFDZFEsS09vQkwyRSxFQUFZUyxHQUNaWixFQUFVLENBQUUzRSxNQUFPLEdBQUlDLFFBQVMsR0FBSUMsUUFBUyxLQUM3QzBFLEVBQW1CLFNBNkJqQix5QkFBSzVDLEdBQUcsYUFBYUMsVUFBVSxPQUM3QiwyQkFBT3VELFFBQVEsbUJBQWYsbUNBRUUsMkJBQU8zQyxLQUFLLFdBQVdwRixLQUFLLGtCQUFrQmdJLFFBQVNsRSxFQUFnQm9CLFNBN0JqRCxTQUFDQyxHQUM3Qm1DLEVBQW9CbkMsRUFBRThDLE9BQU9ELGdCQ2hDakNFLGtCQUFRLGtCQUFDLEVBQUQsTUFBa0JoRixTQUFTUSxlQUFlIiwiZmlsZSI6Im1haW4uYjc2ZjllNzg4NGMzMzVjYzU1YjYuanMiLCJzb3VyY2VzQ29udGVudCI6WyIgXHQvLyBpbnN0YWxsIGEgSlNPTlAgY2FsbGJhY2sgZm9yIGNodW5rIGxvYWRpbmdcbiBcdGZ1bmN0aW9uIHdlYnBhY2tKc29ucENhbGxiYWNrKGRhdGEpIHtcbiBcdFx0dmFyIGNodW5rSWRzID0gZGF0YVswXTtcbiBcdFx0dmFyIG1vcmVNb2R1bGVzID0gZGF0YVsxXTtcbiBcdFx0dmFyIGV4ZWN1dGVNb2R1bGVzID0gZGF0YVsyXTtcblxuIFx0XHQvLyBhZGQgXCJtb3JlTW9kdWxlc1wiIHRvIHRoZSBtb2R1bGVzIG9iamVjdCxcbiBcdFx0Ly8gdGhlbiBmbGFnIGFsbCBcImNodW5rSWRzXCIgYXMgbG9hZGVkIGFuZCBmaXJlIGNhbGxiYWNrXG4gXHRcdHZhciBtb2R1bGVJZCwgY2h1bmtJZCwgaSA9IDAsIHJlc29sdmVzID0gW107XG4gXHRcdGZvcig7aSA8IGNodW5rSWRzLmxlbmd0aDsgaSsrKSB7XG4gXHRcdFx0Y2h1bmtJZCA9IGNodW5rSWRzW2ldO1xuIFx0XHRcdGlmKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChpbnN0YWxsZWRDaHVua3MsIGNodW5rSWQpICYmIGluc3RhbGxlZENodW5rc1tjaHVua0lkXSkge1xuIFx0XHRcdFx0cmVzb2x2ZXMucHVzaChpbnN0YWxsZWRDaHVua3NbY2h1bmtJZF1bMF0pO1xuIFx0XHRcdH1cbiBcdFx0XHRpbnN0YWxsZWRDaHVua3NbY2h1bmtJZF0gPSAwO1xuIFx0XHR9XG4gXHRcdGZvcihtb2R1bGVJZCBpbiBtb3JlTW9kdWxlcykge1xuIFx0XHRcdGlmKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChtb3JlTW9kdWxlcywgbW9kdWxlSWQpKSB7XG4gXHRcdFx0XHRtb2R1bGVzW21vZHVsZUlkXSA9IG1vcmVNb2R1bGVzW21vZHVsZUlkXTtcbiBcdFx0XHR9XG4gXHRcdH1cbiBcdFx0aWYocGFyZW50SnNvbnBGdW5jdGlvbikgcGFyZW50SnNvbnBGdW5jdGlvbihkYXRhKTtcblxuIFx0XHR3aGlsZShyZXNvbHZlcy5sZW5ndGgpIHtcbiBcdFx0XHRyZXNvbHZlcy5zaGlmdCgpKCk7XG4gXHRcdH1cblxuIFx0XHQvLyBhZGQgZW50cnkgbW9kdWxlcyBmcm9tIGxvYWRlZCBjaHVuayB0byBkZWZlcnJlZCBsaXN0XG4gXHRcdGRlZmVycmVkTW9kdWxlcy5wdXNoLmFwcGx5KGRlZmVycmVkTW9kdWxlcywgZXhlY3V0ZU1vZHVsZXMgfHwgW10pO1xuXG4gXHRcdC8vIHJ1biBkZWZlcnJlZCBtb2R1bGVzIHdoZW4gYWxsIGNodW5rcyByZWFkeVxuIFx0XHRyZXR1cm4gY2hlY2tEZWZlcnJlZE1vZHVsZXMoKTtcbiBcdH07XG4gXHRmdW5jdGlvbiBjaGVja0RlZmVycmVkTW9kdWxlcygpIHtcbiBcdFx0dmFyIHJlc3VsdDtcbiBcdFx0Zm9yKHZhciBpID0gMDsgaSA8IGRlZmVycmVkTW9kdWxlcy5sZW5ndGg7IGkrKykge1xuIFx0XHRcdHZhciBkZWZlcnJlZE1vZHVsZSA9IGRlZmVycmVkTW9kdWxlc1tpXTtcbiBcdFx0XHR2YXIgZnVsZmlsbGVkID0gdHJ1ZTtcbiBcdFx0XHRmb3IodmFyIGogPSAxOyBqIDwgZGVmZXJyZWRNb2R1bGUubGVuZ3RoOyBqKyspIHtcbiBcdFx0XHRcdHZhciBkZXBJZCA9IGRlZmVycmVkTW9kdWxlW2pdO1xuIFx0XHRcdFx0aWYoaW5zdGFsbGVkQ2h1bmtzW2RlcElkXSAhPT0gMCkgZnVsZmlsbGVkID0gZmFsc2U7XG4gXHRcdFx0fVxuIFx0XHRcdGlmKGZ1bGZpbGxlZCkge1xuIFx0XHRcdFx0ZGVmZXJyZWRNb2R1bGVzLnNwbGljZShpLS0sIDEpO1xuIFx0XHRcdFx0cmVzdWx0ID0gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSBkZWZlcnJlZE1vZHVsZVswXSk7XG4gXHRcdFx0fVxuIFx0XHR9XG5cbiBcdFx0cmV0dXJuIHJlc3VsdDtcbiBcdH1cblxuIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gb2JqZWN0IHRvIHN0b3JlIGxvYWRlZCBhbmQgbG9hZGluZyBjaHVua3NcbiBcdC8vIHVuZGVmaW5lZCA9IGNodW5rIG5vdCBsb2FkZWQsIG51bGwgPSBjaHVuayBwcmVsb2FkZWQvcHJlZmV0Y2hlZFxuIFx0Ly8gUHJvbWlzZSA9IGNodW5rIGxvYWRpbmcsIDAgPSBjaHVuayBsb2FkZWRcbiBcdHZhciBpbnN0YWxsZWRDaHVua3MgPSB7XG4gXHRcdDA6IDBcbiBcdH07XG5cbiBcdHZhciBkZWZlcnJlZE1vZHVsZXMgPSBbXTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZ2V0dGVyIH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuIFx0XHR9XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBjcmVhdGUgYSBmYWtlIG5hbWVzcGFjZSBvYmplY3RcbiBcdC8vIG1vZGUgJiAxOiB2YWx1ZSBpcyBhIG1vZHVsZSBpZCwgcmVxdWlyZSBpdFxuIFx0Ly8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zXG4gXHQvLyBtb2RlICYgNDogcmV0dXJuIHZhbHVlIHdoZW4gYWxyZWFkeSBucyBvYmplY3RcbiBcdC8vIG1vZGUgJiA4fDE6IGJlaGF2ZSBsaWtlIHJlcXVpcmVcbiBcdF9fd2VicGFja19yZXF1aXJlX18udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XG4gXHRcdGlmKG1vZGUgJiAxKSB2YWx1ZSA9IF9fd2VicGFja19yZXF1aXJlX18odmFsdWUpO1xuIFx0XHRpZihtb2RlICYgOCkgcmV0dXJuIHZhbHVlO1xuIFx0XHRpZigobW9kZSAmIDQpICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuIFx0XHR2YXIgbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpO1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsICdkZWZhdWx0JywgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdmFsdWUgfSk7XG4gXHRcdGlmKG1vZGUgJiAyICYmIHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykgZm9yKHZhciBrZXkgaW4gdmFsdWUpIF9fd2VicGFja19yZXF1aXJlX18uZChucywga2V5LCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHZhbHVlW2tleV07IH0uYmluZChudWxsLCBrZXkpKTtcbiBcdFx0cmV0dXJuIG5zO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuIFx0dmFyIGpzb25wQXJyYXkgPSB3aW5kb3dbXCJ3ZWJwYWNrSnNvbnBcIl0gPSB3aW5kb3dbXCJ3ZWJwYWNrSnNvbnBcIl0gfHwgW107XG4gXHR2YXIgb2xkSnNvbnBGdW5jdGlvbiA9IGpzb25wQXJyYXkucHVzaC5iaW5kKGpzb25wQXJyYXkpO1xuIFx0anNvbnBBcnJheS5wdXNoID0gd2VicGFja0pzb25wQ2FsbGJhY2s7XG4gXHRqc29ucEFycmF5ID0ganNvbnBBcnJheS5zbGljZSgpO1xuIFx0Zm9yKHZhciBpID0gMDsgaSA8IGpzb25wQXJyYXkubGVuZ3RoOyBpKyspIHdlYnBhY2tKc29ucENhbGxiYWNrKGpzb25wQXJyYXlbaV0pO1xuIFx0dmFyIHBhcmVudEpzb25wRnVuY3Rpb24gPSBvbGRKc29ucEZ1bmN0aW9uO1xuXG5cbiBcdC8vIGFkZCBlbnRyeSBtb2R1bGUgdG8gZGVmZXJyZWQgbGlzdFxuIFx0ZGVmZXJyZWRNb2R1bGVzLnB1c2goW1widGpVb1wiLDFdKTtcbiBcdC8vIHJ1biBkZWZlcnJlZCBtb2R1bGVzIHdoZW4gcmVhZHlcbiBcdHJldHVybiBjaGVja0RlZmVycmVkTW9kdWxlcygpO1xuIiwiZXhwb3J0IGRlZmF1bHQgX193ZWJwYWNrX3B1YmxpY19wYXRoX18gKyBcIjhhMzgyMzdhZGFhOGRjZjczODgzMmRhNDYwZTlhOTcyLnN2Z1wiOyIsInZhciBhcGkgPSByZXF1aXJlKFwiIS4uL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvZGlzdC9ydW50aW1lL2luamVjdFN0eWxlc0ludG9TdHlsZVRhZy5qc1wiKTtcbiAgICAgICAgICAgIHZhciBjb250ZW50ID0gcmVxdWlyZShcIiEhLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvZGlzdC9janMuanMhLi9jbG9jay5jc3NcIik7XG5cbiAgICAgICAgICAgIGNvbnRlbnQgPSBjb250ZW50Ll9fZXNNb2R1bGUgPyBjb250ZW50LmRlZmF1bHQgOiBjb250ZW50O1xuXG4gICAgICAgICAgICBpZiAodHlwZW9mIGNvbnRlbnQgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgIGNvbnRlbnQgPSBbW21vZHVsZS5pZCwgY29udGVudCwgJyddXTtcbiAgICAgICAgICAgIH1cblxudmFyIG9wdGlvbnMgPSB7fTtcblxub3B0aW9ucy5pbnNlcnQgPSBcImhlYWRcIjtcbm9wdGlvbnMuc2luZ2xldG9uID0gZmFsc2U7XG5cbnZhciB1cGRhdGUgPSBhcGkoY29udGVudCwgb3B0aW9ucyk7XG5cblxuXG5tb2R1bGUuZXhwb3J0cyA9IGNvbnRlbnQubG9jYWxzIHx8IHt9OyIsIi8vIEltcG9ydHNcbnZhciBfX19DU1NfTE9BREVSX0FQSV9JTVBPUlRfX18gPSByZXF1aXJlKFwiLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvZGlzdC9ydW50aW1lL2FwaS5qc1wiKTtcbnZhciBfX19DU1NfTE9BREVSX0dFVF9VUkxfSU1QT1JUX19fID0gcmVxdWlyZShcIi4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2Rpc3QvcnVudGltZS9nZXRVcmwuanNcIik7XG52YXIgX19fQ1NTX0xPQURFUl9VUkxfSU1QT1JUXzBfX18gPSByZXF1aXJlKFwiLi9zdGF0aW9uX2Nsb2NrLnN2Z1wiKTtcbmV4cG9ydHMgPSBfX19DU1NfTE9BREVSX0FQSV9JTVBPUlRfX18oZmFsc2UpO1xudmFyIF9fX0NTU19MT0FERVJfVVJMX1JFUExBQ0VNRU5UXzBfX18gPSBfX19DU1NfTE9BREVSX0dFVF9VUkxfSU1QT1JUX19fKF9fX0NTU19MT0FERVJfVVJMX0lNUE9SVF8wX19fKTtcbi8vIE1vZHVsZVxuZXhwb3J0cy5wdXNoKFttb2R1bGUuaWQsIFwiLmNsb2NrIHtcXG4gICAgYm9yZGVyLXJhZGl1czogNTAlO1xcbiAgICBiYWNrZ3JvdW5kOiAjZmZmIHVybChcIiArIF9fX0NTU19MT0FERVJfVVJMX1JFUExBQ0VNRU5UXzBfX18gKyBcIikgbm8tcmVwZWF0IGNlbnRlcjtcXG4gICAgYmFja2dyb3VuZC1zaXplOiA4OCU7XFxuICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcXG4gICAgd2lkdGg6IDMwMHB4O1xcbiAgICBoZWlnaHQ6IDMwMHB4O1xcbiAgICBtYXJnaW46IGF1dG87XFxufVxcblxcbkBtZWRpYSAobWF4LXdpZHRoOiA3NTBweCkge1xcbiAgICBpbnB1dCB7XFxuICAgICAgICB3aWR0aDogMjIlO1xcbiAgICB9XFxufVxcblxcbiNob3Vycy1oYW5kIHtcXG4gICAgYmFja2dyb3VuZDogIzAwMDtcXG4gICAgaGVpZ2h0OiAyMCU7XFxuICAgIGxlZnQ6IDQ4Ljc1JTtcXG4gICAgcG9zaXRpb246IGFic29sdXRlO1xcbiAgICB0b3A6IDMwJTtcXG4gICAgdHJhbnNmb3JtLW9yaWdpbjogNTAlIDEwMCU7XFxuICAgIHdpZHRoOiAyLjUlO1xcbn1cXG5cXG4jbWludXRlcy1oYW5kIHtcXG4gICAgYmFja2dyb3VuZDogIzAwMDtcXG4gICAgaGVpZ2h0OiA0MCU7XFxuICAgIGxlZnQ6IDQ5JTtcXG4gICAgcG9zaXRpb246IGFic29sdXRlO1xcbiAgICB0b3A6IDEwJTtcXG4gICAgdHJhbnNmb3JtLW9yaWdpbjogNTAlIDEwMCU7XFxuICAgIHdpZHRoOiAyJTtcXG59XFxuXFxuI3NlY29uZHMtaGFuZCB7XFxuICAgIGJhY2tncm91bmQ6ICMwMDA7XFxuICAgIGhlaWdodDogNDUlO1xcbiAgICBsZWZ0OiA0OS41JTtcXG4gICAgcG9zaXRpb246IGFic29sdXRlO1xcbiAgICB0b3A6IDE0JTtcXG4gICAgdHJhbnNmb3JtLW9yaWdpbjogNTAlIDgwJTtcXG4gICAgd2lkdGg6IDElO1xcbiAgICB6LWluZGV4OiA4O1xcbn1cXG5cXG5cXG5cIiwgXCJcIl0pO1xuLy8gRXhwb3J0c1xubW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzO1xuIiwiY29uc3QgbmV4dFJhbmRvbSA9IChtYXgpID0+IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIG1heCkgKyAxXG5cbmxldCBob3VycyA9IG5leHRSYW5kb20oMTIpXG5sZXQgbWludXRlcyA9IG5leHRSYW5kb20oNTkpXG5sZXQgc2Vjb25kcyA9IG5leHRSYW5kb20oNTkpXG5cbmV4cG9ydCBjb25zdCB0cmlnZ2VyTmV4dCA9ICgpID0+IHtcbiAgaG91cnMgPSBuZXh0UmFuZG9tKDEyKVxuICBtaW51dGVzID0gbmV4dFJhbmRvbSg1OSlcbiAgc2Vjb25kcyA9IG5leHRSYW5kb20oNTkpXG4gIHJldHVybiByZWFkKClcbn1cblxuZXhwb3J0IGNvbnN0IGNoZWNrQW5zd2VyID0gKGEsIGluY2x1ZGVTZWNvbmRzKSA9PiB7XG4gIGNvbnN0IHNraXBPckNoZWNrU2Vjb25kcyA9ICFpbmNsdWRlU2Vjb25kcyB8fCBhLnNlY29uZHMgPT09IHNlY29uZHNcbiAgY29uc3QgYWxsTWF0Y2ggPSBhLmhvdXJzID09PSBob3VycyAmJiBhLm1pbnV0ZXMgPT09IG1pbnV0ZXMgJiYgc2tpcE9yQ2hlY2tTZWNvbmRzXG4gIGNvbnNvbGUubG9nKHtcbiAgICBjaGVja2luZzogYSxcbiAgICBjb3JyZWN0OiByZWFkKCksXG4gICAgaW5jbHVkZVNlY29uZHMsXG4gICAgYWxsTWF0Y2hcbiAgfSlcbiAgcmV0dXJuIGFsbE1hdGNoXG59XG5leHBvcnQgY29uc3QgcmVhZCA9ICgpID0+ICh7IGhvdXJzLCBtaW51dGVzLCBzZWNvbmRzIH0pXG5cbmNvbnNvbGUubG9nKHsgdGltZTogcmVhZCgpIH0pXG4iLCJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnXG4vLyBub2luc3BlY3Rpb24gRVM2VW51c2VkSW1wb3J0c1xuaW1wb3J0IGNzcyBmcm9tICcuL2Nsb2NrLmNzcycgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby11bnVzZWQtdmFyc1xuaW1wb3J0IHsgdG9IYW5kUG9zaXRpb24gfSBmcm9tICcuL2Zyb21UaW1lJ1xuXG5jb25zdCBnZXRSb3RhdGlvbiA9IHNlbGVjdG9yID0+IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3IpICYmXG4gIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3IpLmdldEF0dHJpYnV0ZSgnZGF0YS1yb3RhdGlvbicpXG5cbmNvbnN0IGNzc1JvdGF0aW9uID0gaG91cnMgPT4gYHJvdGF0ZVooJHtob3Vyc31kZWcpYFxuXG5jb25zdCBzZXRSb3RhdGlvbiA9IChlbGVtZW50SWQsIHJvdGF0aW9uKSA9PiB7XG4gIGNvbnN0IGVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChlbGVtZW50SWQpXG4gIGVsZW1lbnQgJiYgKGVsZW1lbnQuc3R5bGUudHJhbnNmb3JtID0gY3NzUm90YXRpb24ocm90YXRpb24pKVxufVxuXG5leHBvcnQgY29uc3QgUXVlc3Rpb25Sb3cgPSAoeyBob3VycywgbWludXRlcywgc2Vjb25kcywgaW5jbHVkZVNlY29uZHMsIHNob3dSb3cgfSkgPT4ge1xuICBjb25zdCBoYW5kcyA9IHRvSGFuZFBvc2l0aW9uKHsgaG91cnMsIG1pbnV0ZXMsIHNlY29uZHMgfSlcblxuICBSZWFjdC51c2VMYXlvdXRFZmZlY3QoKCkgPT4ge1xuICAgIC8vIG9uIGh5ZHJhdGUgUmVhY3Qgd29uJ3QgdXBkYXRlIHRoZSBET00uXG4gICAgLy8gdGhpcyBydW5zIG9ubHkgb25jZSBhbmQgZm9yY2VzIHRoZSBET00gdG8gdXBkYXRlXG4gICAgY29uc3QgaG91cnNSb3RhdGlvbiA9IGdldFJvdGF0aW9uKCcjaG91cnMnKVxuICAgIGNvbnN0IG1pbnV0ZXNSb3RhdGlvbiA9IGdldFJvdGF0aW9uKCcjbWludXRlcycpXG4gICAgY29uc3Qgc2Vjb25kc1JvdGF0aW9uID0gZ2V0Um90YXRpb24oJyNzZWNvbmRzJylcbiAgICBjb25zb2xlLmxvZygnY2hlY2tpbmcgaWYgc2hvdWxkIGZvcmNlIHJlbmRlciB0byB1cGRhdGUgZG9tIG9uIGh5ZHJhdGlvbicpXG4gICAgaWYgKGhvdXJzUm90YXRpb24gIT09IGhhbmRzLmhvdXJzICYmXG4gICAgICBtaW51dGVzUm90YXRpb24gIT09IGhhbmRzLm1pbnV0ZXMgJiZcbiAgICAgIHNlY29uZHNSb3RhdGlvbiAhPT0gaGFuZHMuc2Vjb25kcykge1xuICAgICAgY29uc29sZS5sb2coe1xuICAgICAgICBob3VycyxcbiAgICAgICAgbWludXRlcyxcbiAgICAgICAgc2Vjb25kcyxcbiAgICAgICAgaGFuZHNcbiAgICAgIH0sICdmb3JjaW5nIHJlbmRlcicpXG4gICAgICBzZXRSb3RhdGlvbignaG91cnMtaGFuZCcsIGhhbmRzLmhvdXJzKVxuICAgICAgc2V0Um90YXRpb24oJ21pbnV0ZXMtaGFuZCcsIGhhbmRzLm1pbnV0ZXMpXG4gICAgICBzZXRSb3RhdGlvbignc2Vjb25kcy1oYW5kJywgaGFuZHMuc2Vjb25kcylcbiAgICB9XG4gIH0sIFtdKVxuXG4gIHJldHVybiAoXG4gICAgPGRpdlxuICAgICAgaWQ9J3F1ZXN0aW9uLXJvdycgY2xhc3NOYW1lPSdyb3cnXG4gICAgICBzdHlsZT17eyBkaXNwbGF5OiBzaG93Um93IH19XG4gICAgPlxuICAgICAgPGRpdiBjbGFzc05hbWU9J2Nsb2NrJz5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9J2hvdXJzLWNvbnRhaW5lcic+XG4gICAgICAgICAgPGRpdlxuICAgICAgICAgICAgaWQ9J2hvdXJzLWhhbmQnXG4gICAgICAgICAgICBkYXRhLXJvdGF0aW9uPXtoYW5kcy5ob3Vyc31cbiAgICAgICAgICAgIHN0eWxlPXt7IHRyYW5zZm9ybTogY3NzUm90YXRpb24oaGFuZHMuaG91cnMpIH19XG4gICAgICAgICAgLz5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPSdtaW51dGVzLWNvbnRhaW5lcic+XG4gICAgICAgICAgPGRpdlxuICAgICAgICAgICAgaWQ9J21pbnV0ZXMtaGFuZCdcbiAgICAgICAgICAgIGRhdGEtcm90YXRpb249e2hhbmRzLm1pbnV0ZXN9XG4gICAgICAgICAgICBzdHlsZT17eyB0cmFuc2Zvcm06IGNzc1JvdGF0aW9uKGhhbmRzLm1pbnV0ZXMpIH19XG4gICAgICAgICAgLz5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIHtcbiAgICAgICAgICBpbmNsdWRlU2Vjb25kcyAmJlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J3NlY29uZHMtY29udGFpbmVyJz5cbiAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgIGlkPSdzZWNvbmRzLWhhbmQnXG4gICAgICAgICAgICAgICAgZGF0YS1yb3RhdGlvbj17aGFuZHMuc2Vjb25kc31cbiAgICAgICAgICAgICAgICBzdHlsZT17eyB0cmFuc2Zvcm06IGNzc1JvdGF0aW9uKGhhbmRzLnNlY29uZHMpIH19XG4gICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgfVxuICAgICAgPC9kaXY+XG4gICAgPC9kaXY+XG4gIClcbn1cbiIsImxldCBjYXRHaWZVcmwgPSAnaHR0cHM6Ly9hcGkudGhlY2F0YXBpLmNvbS9hcGkvaW1hZ2VzL2dldD9mb3JtYXQ9c3JjJnR5cGU9Z2lmJ1xubGV0IG5leHRJbWFnZVxubGV0IHByZWxvYWRcblxuY29uc3QgcHJlbG9hZE5leHRDYXRHaWYgPSAoKSA9PiB7XG4gIHByZWxvYWQgPSBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgY2F0R2lmVXJsICs9ICcmY2FjaGVCdXN0ZXI9JyArIG5ldyBEYXRlKCkuZ2V0VGltZSgpXG5cbiAgICBjb25zdCBpbWFnZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2ltZycpXG4gICAgaW1hZ2Uub25sb2FkID0gZnVuY3Rpb24gKCkge1xuICAgICAgY29uc29sZS5sb2coY2F0R2lmVXJsLCAncHJlbG9hZGVkIScpXG4gICAgICBuZXh0SW1hZ2UgPSBpbWFnZVxuICAgICAgcmVzb2x2ZSgpXG4gICAgfVxuICAgIGltYWdlLm9uZXJyb3IgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgcmVqZWN0KGUpXG4gICAgfVxuICAgIGltYWdlLnNyYyA9IGNhdEdpZlVybFxuICB9KVxufVxuXG5leHBvcnQgY29uc3QgYWRkQ2F0SW1hZ2UgPSAoanNFbGVtZW50KSA9PiB7XG4gIGlmICghcHJlbG9hZCkge1xuICAgIHByZWxvYWROZXh0Q2F0R2lmKClcbiAgfVxuXG4gIHByZWxvYWQudGhlbigoKSA9PiB7XG4gICAganNFbGVtZW50LmlubmVySFRNTCA9ICcnXG4gICAganNFbGVtZW50LmFwcGVuZENoaWxkKG5leHRJbWFnZSlcbiAgfSkudGhlbigoKSA9PiB7XG4gICAgcHJlbG9hZCA9IG51bGxcbiAgICBwcmVsb2FkTmV4dENhdEdpZigpXG4gIH0pXG59XG4iLCJleHBvcnQgZnVuY3Rpb24gdG9IYW5kUG9zaXRpb24gKHsgaG91cnMsIG1pbnV0ZXMsIHNlY29uZHMgfSkge1xuICByZXR1cm4ge1xuICAgIGhvdXJzOiAoaG91cnMgKiAzMCkgKyAobWludXRlcyAvIDIpLFxuICAgIG1pbnV0ZXM6IChtaW51dGVzICogNiksXG4gICAgc2Vjb25kczogKHNlY29uZHMgKiA2KVxuICB9XG59XG4iLCJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnXG5cbmNvbnN0IG51bWJlckZyb21JbnB1dCA9IHNlbGVjdG9yID0+XG4gIHBhcnNlSW50KGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3IpLnZhbHVlLCAxMClcblxuZXhwb3J0IGNvbnN0IEFuc3dlcklucHV0ID0gKHsgYW5zd2VyLCBhbnN3ZXJJc0NvcnJlY3QsIGluY2x1ZGVTZWNvbmRzLCBoYW5kbGVDaGFuZ2UsIHNob3dSb3cgfSkgPT4ge1xuICBjb25zdCBzaG93V2hlbldyb25nID0gKCkgPT5cbiAgICBhbnN3ZXJJc0NvcnJlY3QgPT0gbnVsbCB8fCBhbnN3ZXJJc0NvcnJlY3QgPyAnbm9uZScgOiAnJ1xuXG4gIFJlYWN0LnVzZUxheW91dEVmZmVjdCgoKSA9PiB7XG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2Fuc3dlci1yb3cgaW5wdXQjaG91cnMnKS5mb2N1cygpXG4gIH0sIFtdKVxuXG4gIGNvbnN0IG9uQ2hhbmdlID0gKGUpID0+IHtcbiAgICBoYW5kbGVDaGFuZ2Uoe1xuICAgICAgaG91cnM6IG51bWJlckZyb21JbnB1dCgnI2hvdXJzJyksXG4gICAgICBtaW51dGVzOiBudW1iZXJGcm9tSW5wdXQoJyNtaW51dGVzJyksXG4gICAgICBzZWNvbmRzOiBpbmNsdWRlU2Vjb25kcyAmJiBudW1iZXJGcm9tSW5wdXQoJyNzZWNvbmRzJylcbiAgICB9KVxuICB9XG5cbiAgcmV0dXJuIChcbiAgICA8ZGl2XG4gICAgICBpZD0nYW5zd2VyLXJvdycgY2xhc3NOYW1lPSdyb3cnXG4gICAgICBzdHlsZT17eyBkaXNwbGF5OiBzaG93Um93IH19XG4gICAgPlxuICAgICAgVGhlIHRpbWUgaXM6IDxiciAvPlxuICAgICAgPGlucHV0XG4gICAgICAgIHR5cGU9J251bWJlcicgbWF4PScxMicgbWluPScwJyBzdGVwPScxJ1xuICAgICAgICBpZD0naG91cnMnXG4gICAgICAgIHZhbHVlPXthbnN3ZXIuaG91cnN9IG9uQ2hhbmdlPXtvbkNoYW5nZX1cbiAgICAgIC8+Jm5ic3A7OiZuYnNwO1xuICAgICAgPGlucHV0XG4gICAgICAgIHR5cGU9J251bWJlcicgbWF4PSc1OScgbWluPScwJyBzdGVwPScxJ1xuICAgICAgICBpZD0nbWludXRlcydcbiAgICAgICAgdmFsdWU9e2Fuc3dlci5taW51dGVzfSBvbkNoYW5nZT17b25DaGFuZ2V9XG4gICAgICAvPlxuICAgICAge2luY2x1ZGVTZWNvbmRzICYmIDxzcGFuPiZuYnNwOzombmJzcDs8L3NwYW4+fVxuICAgICAge1xuICAgICAgICBpbmNsdWRlU2Vjb25kcyAmJlxuICAgICAgICAgIDxpbnB1dFxuICAgICAgICAgICAgdHlwZT0nbnVtYmVyJyBtYXg9JzU5JyBtaW49JzAnIHN0ZXA9JzEnXG4gICAgICAgICAgICBpZD0nc2Vjb25kcydcbiAgICAgICAgICAgIHZhbHVlPXthbnN3ZXIuc2Vjb25kc30gb25DaGFuZ2U9e29uQ2hhbmdlfVxuICAgICAgICAgIC8+XG4gICAgICB9XG4gICAgICA8ZGl2IGNsYXNzTmFtZT0nbWFyay1ob2xkZXInPlxuICAgICAgICA8c3BhbiBjbGFzc05hbWU9J2Nyb3NzJyBzdHlsZT17eyBkaXNwbGF5OiBzaG93V2hlbldyb25nKCkgfX0+4pyYPC9zcGFuPlxuICAgICAgPC9kaXY+XG4gICAgPC9kaXY+XG4gIClcbn1cbiIsImltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCdcbmltcG9ydCAqIGFzIGNhdEdpZnMgZnJvbSAnLi9jYXQtZ2lmcydcblxuZXhwb3J0IGNvbnN0IFJhbmRvbUNhdEdpZiA9ICh7IHF1ZXN0aW9uIH0pID0+IHtcbiAgUmVhY3QudXNlTGF5b3V0RWZmZWN0KCgpID0+IHtcbiAgICBjYXRHaWZzLmFkZENhdEltYWdlKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjYXQtZ2lmJykpXG4gIH0sIFtxdWVzdGlvbl0pXG5cbiAgcmV0dXJuIChcbiAgICA8ZGl2IGlkPSdjYXQtZ2lmJyBjbGFzc05hbWU9J2RvbmUtcm93Jz5cbiAgICAgIExvYWRpbmcuLi5cbiAgICA8L2Rpdj5cbiAgKVxufVxuIiwiaW1wb3J0IHsgUmFuZG9tQ2F0R2lmIH0gZnJvbSAnLi9SYW5kb21DYXRHaWYnXG5pbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnXG5cbmV4cG9ydCBjb25zdCBDb3JyZWN0QW5zd2VyID0gKHsgcXVlc3Rpb24sIGluY2x1ZGVTZWNvbmRzLCBzaG91bGREaXNwbGF5LCByZXNldFBhZ2UgfSkgPT4ge1xuICBsZXQgZm9ybWF0dGVkQW5zd2VyID0gYCR7cXVlc3Rpb24uaG91cnMudG9TdHJpbmcoKS5wYWRTdGFydCgyLCAnMCcpfToke3F1ZXN0aW9uLm1pbnV0ZXMudG9TdHJpbmcoKS5wYWRTdGFydCgyLCAnMCcpfWBcbiAgaWYgKGluY2x1ZGVTZWNvbmRzKSBmb3JtYXR0ZWRBbnN3ZXIgKz0gYDoke3F1ZXN0aW9uLnNlY29uZHMudG9TdHJpbmcoKS5wYWRTdGFydCgyLCAnMCcpfWBcblxuICByZXR1cm4gKFxuICAgIDxkaXYgaWQ9J2RvbmUnIGNsYXNzTmFtZT0ncm93JyBzdHlsZT17eyBkaXNwbGF5OiBzaG91bGREaXNwbGF5IH19PlxuICAgICAgPGRpdiBjbGFzc05hbWU9J3Jlc3VsdCBkb25lLXJvdyc+XG4gICAgICAgIFllcyEgVGhlIHRpbWUgd2FzIHtmb3JtYXR0ZWRBbnN3ZXJ9XG4gICAgICA8L2Rpdj5cbiAgICAgIDxkaXYgY2xhc3NOYW1lPSdkb25lLXJvdyc+XG4gICAgICAgIDxidXR0b24gb25DbGljaz17cmVzZXRQYWdlfT5cbiAgICAgICAgICBBd2Vzb21lLCBBZ2Fpbj9cbiAgICAgICAgPC9idXR0b24+XG4gICAgICA8L2Rpdj5cbiAgICAgIDxSYW5kb21DYXRHaWYgcXVlc3Rpb249e3F1ZXN0aW9ufSAvPlxuICAgIDwvZGl2PlxuICApXG59XG4iLCJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnXG5pbXBvcnQgKiBhcyBxdWVzdGlvbiBmcm9tICcuL3F1ZXN0aW9uJ1xuaW1wb3J0IHsgUXVlc3Rpb25Sb3cgfSBmcm9tICcuL1F1ZXN0aW9uUm93J1xuaW1wb3J0IHsgQW5zd2VySW5wdXQgfSBmcm9tICcuL0VudGVyQW5zd2VyUm93J1xuaW1wb3J0IHsgQ29ycmVjdEFuc3dlciB9IGZyb20gJy4vQ29ycmVjdEFuc3dlclJvdydcblxuY29uc3QgQ2xvY2t5TWNGYWNlID0gKCkgPT4ge1xuICBjb25zdCBbYW5zd2VyLCBzZXRBbnN3ZXJdID0gUmVhY3QudXNlU3RhdGUoe1xuICAgIGhvdXJzOiAnJyxcbiAgICBtaW51dGVzOiAnJyxcbiAgICBzZWNvbmRzOiAnJ1xuICB9KVxuICBjb25zdCBbYW5zd2VySXNDb3JyZWN0LCBzZXRBbnN3ZXJJc0NvcnJlY3RdID0gUmVhY3QudXNlU3RhdGUobnVsbClcbiAgY29uc3QgW3EsIHNldFF1ZXN0aW9uXSA9IFJlYWN0LnVzZVN0YXRlKHF1ZXN0aW9uLnJlYWQoKSlcbiAgY29uc3QgW2luY2x1ZGVTZWNvbmRzLCBzZXRJbmNsdWRlUXVlc3Rpb25zXSA9IFJlYWN0LnVzZVN0YXRlKGZhbHNlKVxuXG4gIGNvbnN0IGhhbmRsZUFuc3dlckNoYW5nZSA9IChhbnN3ZXIpID0+IHtcbiAgICBjb25zb2xlLmxvZyh7IGhhbmRsaW5nOiBhbnN3ZXIgfSlcbiAgICBzZXRBbnN3ZXIoYW5zd2VyKVxuICAgIHNldEFuc3dlcklzQ29ycmVjdChxdWVzdGlvbi5jaGVja0Fuc3dlcihhbnN3ZXIsIGluY2x1ZGVTZWNvbmRzKSlcbiAgfVxuXG4gIGNvbnN0IHNob3dXaGVuQ29ycmVjdCA9ICgpID0+XG4gICAgYW5zd2VySXNDb3JyZWN0ID09IG51bGwgfHwgIWFuc3dlcklzQ29ycmVjdCA/ICdub25lJyA6ICcnXG5cbiAgY29uc3QgaGlkZVdoZW5Db3JyZWN0ID0gKCkgPT5cbiAgICBhbnN3ZXJJc0NvcnJlY3QgPT0gbnVsbCB8fCAhYW5zd2VySXNDb3JyZWN0ID8gJycgOiAnbm9uZSdcblxuICBjb25zdCByZXNldFBhZ2UgPSAoKSA9PiB7XG4gICAgY29uc3QgbmV3UXVlc3Rpb24gPSBxdWVzdGlvbi50cmlnZ2VyTmV4dCgpXG4gICAgc2V0UXVlc3Rpb24obmV3UXVlc3Rpb24pXG4gICAgc2V0QW5zd2VyKHsgaG91cnM6ICcnLCBtaW51dGVzOiAnJywgc2Vjb25kczogJycgfSlcbiAgICBzZXRBbnN3ZXJJc0NvcnJlY3QobnVsbClcbiAgfVxuXG4gIGNvbnN0IGluY2x1ZGVTZWNvbmRzQ2hhbmdlZCA9IChlKSA9PiB7XG4gICAgc2V0SW5jbHVkZVF1ZXN0aW9ucyhlLnRhcmdldC5jaGVja2VkKVxuICB9XG5cbiAgcmV0dXJuIChcbiAgICA8ZGl2PlxuICAgICAgPFF1ZXN0aW9uUm93XG4gICAgICAgIGhvdXJzPXtxLmhvdXJzfVxuICAgICAgICBtaW51dGVzPXtxLm1pbnV0ZXN9XG4gICAgICAgIHNlY29uZHM9e3Euc2Vjb25kc31cbiAgICAgICAgaW5jbHVkZVNlY29uZHM9e2luY2x1ZGVTZWNvbmRzfVxuICAgICAgICBzaG93Um93PXtoaWRlV2hlbkNvcnJlY3QoKX1cbiAgICAgIC8+XG4gICAgICA8QW5zd2VySW5wdXRcbiAgICAgICAgYW5zd2VyPXthbnN3ZXJ9XG4gICAgICAgIGFuc3dlcklzQ29ycmVjdD17YW5zd2VySXNDb3JyZWN0fVxuICAgICAgICBpbmNsdWRlU2Vjb25kcz17aW5jbHVkZVNlY29uZHN9XG4gICAgICAgIHNob3dSb3c9e2hpZGVXaGVuQ29ycmVjdCgpfVxuICAgICAgICBoYW5kbGVDaGFuZ2U9e2hhbmRsZUFuc3dlckNoYW5nZX1cbiAgICAgIC8+XG4gICAgICA8Q29ycmVjdEFuc3dlclxuICAgICAgICBxdWVzdGlvbj17cX1cbiAgICAgICAgaW5jbHVkZVNlY29uZHM9e2luY2x1ZGVTZWNvbmRzfVxuICAgICAgICBzaG91bGREaXNwbGF5PXtzaG93V2hlbkNvcnJlY3QoKX1cbiAgICAgICAgcmVzZXRQYWdlPXtyZXNldFBhZ2V9XG4gICAgICAvPlxuICAgICAgPGRpdiBpZD0nZGlmZmljdWx0eScgY2xhc3NOYW1lPSdyb3cnPlxuICAgICAgICA8bGFiZWwgaHRtbEZvcj0naW5jbHVkZS1zZWNvbmRzJz5cbiAgICAgICAgICBJbmNsdWRlIHNlY29uZHMgaW4gdGhlIHF1ZXN0aW9uP1xuICAgICAgICAgIDxpbnB1dCB0eXBlPSdjaGVja2JveCcgbmFtZT0naW5jbHVkZS1zZWNvbmRzJyBjaGVja2VkPXtpbmNsdWRlU2Vjb25kc30gb25DaGFuZ2U9e2luY2x1ZGVTZWNvbmRzQ2hhbmdlZH0gLz5cbiAgICAgICAgPC9sYWJlbD5cbiAgICAgIDwvZGl2PlxuICAgIDwvZGl2PlxuICApXG59XG5cbmV4cG9ydCBkZWZhdWx0IENsb2NreU1jRmFjZVxuIiwiaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0J1xuaW1wb3J0IHsgaHlkcmF0ZSB9IGZyb20gJ3JlYWN0LWRvbSdcbmltcG9ydCBDbG9ja3lNY0ZhY2UgZnJvbSAnLi9DbG9ja3lNY0ZhY2UnXG5cbmh5ZHJhdGUoPENsb2NreU1jRmFjZSAvPiwgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Jvb3QnKSlcbiJdLCJzb3VyY2VSb290IjoiIn0=